{"version":3,"sources":["../../../app/routes/auth/index.js"],"names":["router","express","Router","PSS_BASE_URL","process","env","tenantId","TENANT_ID","secret","SECRET","post","req","res","userExternalId","STORE","users","uuid","authParams","guiText","guiHeader","type","AUTH_TYPES","OK","hashStr","signature","console","log","method","headers","url","data","then","response","json","msg","error","status"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAGA;;AAGA;;;;AAEA,IAAMA,MAAM,GAAGC,oBAAQC,MAAR,EAAf;;AACA,IAAMC,YAAY,GAAGC,OAAO,CAACC,GAAR,CAAYF,YAAjC;AACA,IAAMG,QAAQ,GAAGF,OAAO,CAACC,GAAR,CAAYE,SAA7B;AACA,IAAMC,MAAM,GAAGJ,OAAO,CAACC,GAAR,CAAYI,MAA3B;AAEAT,MAAM,CAACU,IAAP,CAAY,GAAZ,EAAiB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7B,MAAMC,cAAc,GAAGC,sBAAMC,KAAN,CAAY,CAAZ,EAAeC,IAAtC;AACA,MAAMC,UAAU,GAAG;AACjBC,IAAAA,OAAO,EAAE,8BADQ;AAEjBC,IAAAA,SAAS,EAAE;AAFM,GAAnB;AAIA,MAAMC,IAAI,GAAGC,sBAAWC,EAAxB;AACA,MAAMC,OAAO,aAAMjB,QAAN,SAAiBO,cAAjB,SAAkCL,MAAlC,CAAb;AACA,MAAMgB,SAAS,GAAG,kCAAoBD,OAApB,CAAlB;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYF,SAAZ;AAEA,yBAAM;AACFG,IAAAA,MAAM,EAAE,MADN;AAEFC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFP;AAKFC,IAAAA,GAAG,YAAK1B,YAAL,kBALD;AAMF2B,IAAAA,IAAI,EAAE;AACJxB,MAAAA,QAAQ,EAARA,QADI;AAEJO,MAAAA,cAAc,EAAdA,cAFI;AAGJO,MAAAA,IAAI,EAAJA,IAHI;AAIJH,MAAAA,UAAU,EAAVA,UAJI;AAKJO,MAAAA,SAAS,EAATA;AALI;AANJ,GAAN,EAcGO,IAdH,CAcQ,UAACC,QAAD,EAAc;AAClBpB,IAAAA,GAAG,CAACqB,IAAJ,CAAS;AACPC,MAAAA,GAAG,EAAE,2BADE;AAEPJ,MAAAA,IAAI,EAAEE,QAAQ,CAACF;AAFR,KAAT;AAID,GAnBH,WAoBS,UAACK,KAAD,EAAW;AAChBvB,IAAAA,GAAG,CAACwB,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqB;AACnBC,MAAAA,GAAG,EAAE,6BADc;AAEnBJ,MAAAA,IAAI,EAAEK,KAAK,CAACH,QAAN,CAAeF;AAFF,KAArB;AAID,GAzBH;AA2BD,CAtCD;eAwCe9B,M","sourcesContent":["import express from 'express';\r\nimport STORE from '../../data/dummy-user';\r\nimport {\r\n  AUTH_TYPES\r\n} from '../../util/constants';\r\nimport {\r\n  createHashSignature\r\n} from '../../util/helpers';\r\nimport axios from 'axios'\r\n\r\nconst router = express.Router();\r\nconst PSS_BASE_URL = process.env.PSS_BASE_URL;\r\nconst tenantId = process.env.TENANT_ID;\r\nconst secret = process.env.SECRET;\r\n\r\nrouter.post('/', (req, res) => {\r\n  const userExternalId = STORE.users[0].uuid;\r\n  const authParams = {\r\n    guiText: 'Do you okay this transaction',\r\n    guiHeader: 'Authorization requested'\r\n  };\r\n  const type = AUTH_TYPES.OK\r\n  const hashStr = `${tenantId}${userExternalId}${secret}`;\r\n  const signature = createHashSignature(hashStr);\r\n  console.log(signature);\r\n\r\n  axios({\r\n      method: 'post',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      url: `${PSS_BASE_URL}/gateway/auth`,\r\n      data: {\r\n        tenantId,\r\n        userExternalId,\r\n        type,\r\n        authParams,\r\n        signature\r\n      }\r\n    })\r\n    .then((response) => {\r\n      res.json({\r\n        msg: 'Authentication successful',\r\n        data: response.data\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      res.status(400).json({\r\n        msg: 'Authentication unsuccessful',\r\n        data: error.response.data\r\n      });\r\n    });\r\n\r\n})\r\n\r\nexport default router"],"file":"index.js"}